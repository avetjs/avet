webpackJsonp([0],{1367:function(n,s){n.exports={content:["article",["p",["img",{title:null,src:"https://cdn-images-1.medium.com/max/1600/1*Z4YLKQX_K7HUdz1AHtUKhw.jpeg",alt:null}]],["h2","\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u540c\u6784\u6e32\u67d3"],["p","\u540c\u6784\u6e32\u67d3\u5b83\u89e3\u51b3\u4e86\u54ea\u4e9b\u95ee\u9898\uff1f"],["ol",["li",["p","\u670d\u52a1\u7aef\u6e32\u67d3\u9996\u5148\u4f1a\u5728\u670d\u52a1\u7aef\u83b7\u53d6\u5230\u6e32\u67d3\u9875\u9762\u7684\u6570\u636e\uff0c\u7136\u540e\u62fc\u88c5\u9700\u8981\u6e32\u67d3\u7684 HTML \u6570\u636e\uff0c\u6700\u540e\u53d1\u9001\u5230\u5ba2\u6237\u7aef\u3002\u5ba2\u6237\u7aef\u5728\u62ff\u5230\u8fd9\u4e9b\u521d\u59cb\u5316\u7684\u9875\u9762 HTML \u548c \u6240\u9700\u8981\u7684\u6570\u636e\u540e\u6e32\u67d3\u9875\u9762\u3002\u4ed6\u89e3\u51b3\u4e86\u521d\u59cb\u5316\u9875\u9762\u6162\u7684\u95ee\u9898\uff0c\u4e0d\u9700\u8981\u7b49\u5f85 javascript \u52a0\u8f7d\u597d\u624d\u80fd\u770b\u5230\u9875\u9762\u3002"]],["li",["p","\u7531\u4e8e\u6570\u636e\u548c\u6807\u7b7e\u5728\u9996\u6b21\u52a0\u8f7d\u65f6\u5019\u90fd\u7531\u670d\u52a1\u7aef\u8fdb\u884c\u63d0\u4f9b\u4e86\uff0c\u6240\u4ee5\u641c\u7d22\u5f15\u64ce\u722c\u866b\u662f\u53ef\u4ee5\u6210\u529f\u6216\u8bb8\u5230 HTML body \u7684\u3002\u5373\u4f7f\u7528\u6237\u5728\u6d4f\u89c8\u5668\u7981\u7528\u4e86 javascript\uff0c\u6211\u4eec\u7684\u9875\u9762\u4e5f\u80fd\u591f\u6b63\u5e38\u663e\u793a\u3002\u5b83\u89e3\u51b3\u4e86 SEO \u95ee\u9898\u3002"]]],["h2","\u5982\u4f55\u4f7f\u7528"],["p","\u90a3\u5728 Avet \u4e2d\uff0c\u6211\u4eec\u5982\u4f55\u66f4\u597d\u7684\u4f7f\u7528\u8fd9\u4e2a\u80fd\u529b\uff1f"],["p","\u5728\u9875\u9762\u7ec4\u4ef6\u4e2d\uff0c\u5f53\u4f60\u9700\u8981\u4f7f\u7528 state \u7ba1\u7406\u9875\u9762\u6570\u636e\u72b6\u6001\u3001\u58f0\u660e\u5468\u671f\u7684 hooks \u6216\u8005\u662f\u4f7f\u7528\u521d\u59cb\u5316\u6570\u636e\u7684\u5165\u53e3\u3002\u5c31\u9700\u8981 export \u4e00\u4e2a ",["code","React.Component"]," \u800c\u4e0d\u662f ",["code","stateless function"],"\uff1a"],["pre",{lang:"javascript",highlighted:'<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>\n  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> ctx <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> userAgent <span class="token operator">=</span> ctx <span class="token operator">?</span> ctx<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">\'user-agent\'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> navigator<span class="token punctuation">.</span>userAgent\n    <span class="token keyword">return</span> <span class="token punctuation">{</span> userAgent <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        Hello World <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>userAgent<span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>'},["code","import React from 'react'\n\nexport default class extends React.Component {\n  static async getInitialProps({ ctx }) {\n    const userAgent = ctx ? ctx.get('user-agent') : navigator.userAgent\n    return { userAgent }\n  }\n\n  render() {\n    return (\n      <div>\n        Hello World {this.props.userAgent}\n      </div>\n    )\n  }\n}"]],["p","\u9700\u8981\u6ce8\u610f\u4e0b\uff0c\u53ef\u4ee5\u770b\u51fa ",["code","getInitialProps"]," \u662f\u4e00\u4e2a async \u7684\u9759\u6001\u65b9\u6cd5\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f02\u6b65\u7684\u83b7\u53d6\u5230\u6570\u636e\uff0c\u7136\u540e\u8fd4\u56de\u7684\u4e00\u4e2a\u7eaf JavaScript \u5bf9\u8c61\u3002\u6211\u4eec\u5728\u6302\u8f7d\u7ec4\u4ef6\u7684\u65f6\u5019\u4f1a\u628a\u8fd9\u4e2a\u5bf9\u8c61\u901a\u8fc7 props \u4f20\u9012\u5230\u8fd9\u4e2a\u7ec4\u4ef6\u3002"],["p","\u521d\u59cb\u5316\u9875\u9762\u52a0\u8f7d\u7684\u65f6\u5019\uff0c",["code","getInitialProps"]," \u53ea\u4f1a\u5728 server \u6267\u884c\u3002\u5728\u5ba2\u6237\u7aef\u8fdb\u884c\u9875\u9762\u8df3\u8f6c\u7684\u65f6\u5019\u4e5f\u4f1a\u8fdb\u884c\u89e6\u53d1\u3002\n\u800c\u4e14\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",["code","getInitialProps"]," \u4e0d\u80fd\u7528\u5728\u5b50\u7ec4\u4ef6\uff0c\u53ea\u80fd\u5728 ",["code","page"]," \u4e2d\u4f7f\u7528\u3002"],["p","\u4f60\u53ef\u4ee5\u5728 stateless function \u4e2d\u58f0\u660e ",["code","getInitialProps"],"\uff1a"],["pre",{lang:"javascript",highlighted:'<span class="token keyword">const</span> Page <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> stars <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>\n  <span class="token operator">&lt;</span>div<span class="token operator">></span>\n    Next stars<span class="token punctuation">:</span> <span class="token punctuation">{</span>stars<span class="token punctuation">}</span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n\nPage<span class="token punctuation">.</span>getInitialProps <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> req <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">\'https://api.github.com/repos/avetjs/avet\'</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span> stars<span class="token punctuation">:</span> json<span class="token punctuation">.</span>stargazers_count <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> Page'},["code","const Page = ({ stars }) =>\n  <div>\n    Next stars: {stars}\n  </div>\n\nPage.getInitialProps = async ({ req }) => {\n  const res = await fetch('https://api.github.com/repos/avetjs/avet')\n  const json = await res.json()\n  return { stars: json.stargazers_count }\n}\n\nexport default Page"]],["p",["code","getInitialProps"]," \u63a5\u6536\u4e86\u4e00\u4e2a context \u5bf9\u8c61\uff0c\u5b83\u5305\u542b\u4e0b\u9762\u8fd9\u4e9b\u5c5e\u6027\uff1a"],["ul",["li",["p",["code","pathname"]," - url \u4e2d\u7684\u4e00\u4e2a\u533a\u57df"]],["li",["p",["code","query"]," - url \u7684 query \u5bf9\u8c61"]],["li",["p",["code","asPath"]," - \u6574\u4e2a\u9875\u9762 url"]],["li",["p",["code","ctx"]," - Koa object"]],["li",["p",["code","jsonPageRes"]," - Fetch Response \u5bf9\u8c61 (client only)"]],["li",["p",["code","err"]," -  \u6e32\u67d3\u65f6\u53d1\u751f\u7684\u9519\u8bef\u5bf9\u8c61"]]]],meta:{category:"\u7279\u6027",title:"React \u540c\u6784\u6e32\u67d3",filename:"docs/spec/ssr.zh-CN.md"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u540c\u6784\u6e32\u67d3",title:"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u540c\u6784\u6e32\u67d3"},"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u540c\u6784\u6e32\u67d3"]],["li",["a",{className:"bisheng-toc-h2",href:"#\u5982\u4f55\u4f7f\u7528",title:"\u5982\u4f55\u4f7f\u7528"},"\u5982\u4f55\u4f7f\u7528"]]]}}});