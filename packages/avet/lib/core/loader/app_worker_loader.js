const { AppWorkerLoader } = require('../egg');
const createLoader = require('./create_loader');

class AvetAppWorkerLoader extends createLoader(AppWorkerLoader) {
  load() {
    // app > plugin > core
    this.loadApplicationExtend();
    this.loadRequestExtend();
    this.loadResponseExtend();
    this.loadContextExtend();
    this.loadHelperExtend();

    this.loadLayout();

    // app > plugin
    this.loadCustomApp();
    // app > plugin
    this.loadService();
    // app > plugin > core
    this.loadMiddleware();
    // app
    this.loadController();
    // app
    this.loadRouter(); // 依赖 controller
  }
}

module.exports = AvetAppWorkerLoader;
